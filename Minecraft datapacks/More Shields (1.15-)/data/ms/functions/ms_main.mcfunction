execute as @e[type=item,nbt={Item:{id:"minecraft:shield"}}] at @s if entity @e[distance=..1,nbt={Item:{id:"minecraft:iron_ingot"}}] run data merge entity @s {Item:{tag:{HideFlags:33,Enchantments:[{lvl:1s,id:"minecraft:unbreaking"}],display:{Name:"{\"text\":\"Iron Shield\",\"italic\":\"false\"}"},BlockEntityTag:{Patterns:[{Pattern:"cbo",Color:7},{Pattern:"bo",Color:8},{Pattern:"gra",Color:0}],Base:8}}}}
execute as @e[type=item,nbt={Item:{id:"minecraft:shield"}}] at @s if entity @e[distance=..1,nbt={Item:{id:"minecraft:iron_ingot"}}] run kill @e[type=item,distance=..1,nbt={Item:{id:"minecraft:iron_ingot"}}]

#execute as @e[type=item,nbt={Item:{id:"minecraft:shield"}}] at @s if entity @e[distance=..1,nbt={Item:{id:"minecraft:gold_ingot"}}] run data merge entity @s {Item:{tag:{HideFlags:33,Enchantments:[{lvl:2s,id:"minecraft:unbreaking"},{lvl:1s,id:"minecraft:mending"}],display:{Name:"{\"text\":\"Golden Shield\",\"italic\":\"false\"}"},BlockEntityTag:{Patterns:[{Pattern:"cbo",Color:7},{Pattern:"bo",Color:4},{Pattern:"gra",Color:0}],Base:4}}}}
#execute as @e[type=item,nbt={Item:{id:"minecraft:shield"}}] at @s if entity @e[distance=..1,nbt={Item:{id:"minecraft:gold_ingot"}}] run kill @e[type=item,distance=..1,nbt={Item:{id:"minecraft:gold_ingot"}}]

execute as @e[type=item,nbt={Item:{id:"minecraft:shield"}}] at @s if entity @e[distance=..1,nbt={Item:{id:"minecraft:diamond"}}] run data merge entity @s {Item:{tag:{HideFlags:33,Enchantments:[{lvl:3s,id:"minecraft:unbreaking"},{lvl:1s,id:"minecraft:mending"}],display:{Name:"{\"text\":\"Diamond Shield\",\"italic\":\"false\"}"},BlockEntityTag:{Patterns:[{Pattern:"cbo",Color:7},{Pattern:"bo",Color:3},{Pattern:"gra",Color:0}],Base:3}}}}
execute as @e[type=item,nbt={Item:{id:"minecraft:shield"}}] at @s if entity @e[distance=..1,nbt={Item:{id:"minecraft:diamond"}}] run kill @e[type=item,distance=..1,nbt={Item:{id:"minecraft:diamond"}}]